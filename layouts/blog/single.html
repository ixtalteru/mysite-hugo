{{ define "main" }}
<section class="section pt-7">
  <div class="container">
    <div class="row justify-center">

      <!-- 左：本文 -->
      <article class="lg:col-8 md:col-12">

        {{ with .Params.image }}
        <div class="mb-10">
          {{ partial "image" (dict "Src" . "Context" $.Page "Alt" $.Title "Class" "w-full rounded") }}
        </div>
        {{ end }}

        <h1 class="h2 mb-4">{{ .Title }}</h1>

        <!-- メタ情報 -->
        <ul class="mb-6 text-sm opacity-80">
          <li class="inline-block mr-4">
            <i class="fa-regular fa-folder mr-1"></i>
            {{ range $i, $c := .Params.categories }}
              {{ if $i }}, {{ end }}
              <a href="{{ `categories/` | relLangURL }}{{ $c | urlize }}/">{{ $c }}</a>
            {{ end }}
          </li>
          <li class="inline-block">
            <i class="fa-regular fa-clock mr-1"></i>
            {{ time.Format ":date_long" .PublishDate }}
          </li>
        </ul>

        <!-- 本文 -->
        <div class="content">
          {{ .Content }}
        </div>

      </article>

      <!-- 右：TOC -->
      {{ if .TableOfContents }}
      <aside class="lg:col-2 md:col-12">

        <!-- ▼ PC用（常時表示） -->
        <div class="hidden lg:block sticky top-24 p-4 rounded bg-light dark:bg-darkmode-light">
          <h5 class="mb-3">{{ i18n "table_of_contents" }}</h5>
          <div class="toc text-sm">
            {{ .TableOfContents }}
          </div>
        </div>

        <!-- ▼ モバイル用（折りたたみ） -->
        <div class="block lg:hidden mb-6">
          <details class="toc-mobile rounded bg-light dark:bg-darkmode-light p-4">
            <summary class="cursor-pointer font-bold">
              {{ i18n "open_toc" }}
            </summary>
            <div class="toc text-sm mt-3">
              {{ .TableOfContents }}
            </div>
          </details>
        </div>

      </aside>
      {{ end }}

    </div>
  </div>
</section>
{{ end }}
